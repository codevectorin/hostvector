{% extends 'home/layouts/main.tpl' %}

{% block title %}Contact Us{% endblock %}

{% block js %}
{{ parent() }}
          <script type="text/javascript">
function reFormat(e,s,a){return'<span class="icon is-small is-right"><i class="fa fa-'+a+'"></i></span></p><p class="help is-'+s+'">'+e+"</p>"}function validateForm(){var e=document.getElementsByTagName("input"),s=document.getElementsByClassName("response"),a=1;return""==e[0].value?(e[0].className="input is-danger",s[0].innerHTML=reFormat("Please enter your name","danger","close"),a=0):(e[0].className="input is-success",s[0].innerHTML=reFormat("","success","check")),""==e[1].value?(e[1].className="input is-danger",s[1].innerHTML=reFormat("Please enter your email id","danger","close"),a=0):mailReg.test(e[1].value)?(e[1].className="input is-danger",s[1].innerHTML=reFormat("Please enter a valid mail id","danger","close"),a=0):(e[1].className="input is-success",s[1].innerHTML=reFormat("","success","check")),""==e[4].value?(e[4].className="input is-danger",s[2].innerHTML=reFormat("Please enter a subject","danger","close"),a=0):(e[4].className="input is-success",s[2].innerHTML=reFormat("","success","check")),""==document.getElementById("msgbox").value?(document.getElementById("msgbox").className="textarea is-danger",s[3].innerHTML=reFormat("Please enter a message!","danger","close"),a=0):(document.getElementById("msgbox").className="textarea is-success",s[3].innerHTML=reFormat("","success","check")),0==a?!1:!0}var mailReg=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
//ajax section
function getCORS(url, success) {
      var xhr = new XMLHttpRequest();
      if (!('withCredentials' in xhr)) xhr = new XDomainRequest(); // fix IE8/9
      xhr.open('GET', url);
      xhr.onload = success;
      xhr.send();
      return xhr;
  }
  
  // example request
  getCORS('https://foo.bar/?p1=1&p2=Hello+World', function(request){
      var response = request.currentTarget.response || request.target.responseText;
      console.log(response);
  });
         </script>
{% endblock %}

{% block content %}
 <section class="section">
            <div class="container invisible" data-animate data-animation-classes="animated fadeIn" data-animation-delay="500">
            <h1 class="title is-1">
                    Contact Us
                </h1>
                <p class="subtitle is-4" style="color: grey">
                    Clarifications? Ask us, we are happy to help you!
                </p>
                <hr>
                <form action="/api/support" method="post" onsubmit="return validateForm();">
                <div class="field is-horizontal">
                  <div class="field-label is-normal">
                    <label class="label">From</label>
                  </div>
                  <div class="field-body">
                    <div class="field is-grouped">
                      <p class="control is-expanded has-icons-left has-icons-right">
                        <input class="input" type="text" placeholder="Name" name="name">
                        <span class="icon is-small is-left">
                          <i class="fa fa-user"></i>
                        </span>
                        <label class="response"></label>
                      </p>
                    </div>
                    <div class="field">
                      <p class="control is-expanded has-icons-left has-icons-right">
                        <input class="input" type="text" placeholder="Email" name="email">
                        <span class="icon is-small is-left">
                          <i class="fa fa-envelope"></i>
                        </span>
                        <label class="response"></label>
                        </p>
                    </div>
                  </div>
                </div>

                <div class="field is-horizontal">
                  <div class="field-label is-normal">
                    <label class="label">Department</label>
                  </div>
                  <div class="field-body">
                    <div class="field is-narrow">
                      <div class="control">
                        <div class="select is-fullwidth">
                          <select name="department">
                            <option>Sales</option>
                            <option>Info</option>
                            <option>Services</option>
                          </select>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="field is-horizontal">
                  <div class="field-label">
                    <label class="label">Already a client?</label>
                  </div>
                  <div class="field-body">
                    <div class="field is-narrow">
                      <div class="control">
                        <label class="radio" name="client">
                          <input type="radio" value="1" name="member">
                          Yes
                        </label>
                        <label class="radio">
                          <input type="radio" value="0" name="member" checked>
                          No
                        </label>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="field is-horizontal">
                  <div class="field-label is-normal">
                    <label class="label">Subject</label>
                  </div>
                  <div class="field-body">
                    <div class="field">
                      <p class="control is-expanded has-icons-left has-icons-right">
                        <input class="input" type="text" name="title" placeholder="e.g. Do you have 1 year subscription?">
                          <span class="icon is-small is-left">
                          <i class="fa fa-sticky-note"></i>
                        </span>
                        <label class="response"></label>
                      </p>
                    </div>
                  </div>
                </div>

                <div class="field is-horizontal">
                  <div class="field-label is-normal">
                    <label class="label">Question</label>
                  </div>
                  <div class="field-body">
                    <div class="field">
                      <p class="control is-expanded has-icons-left has-icons-right">
                        <textarea class="textarea" name="message" placeholder="Explain how we can help you" id="msgbox"></textarea>
                        <label class="response"></label>
                      </p>
                    </div>
                  </div>
                </div>
                <script src='https://www.google.com/recaptcha/api.js'></script>


                <div class="field is-horizontal">
                  <div class="field-label is-normal">
                  <label class="label">Captcha</label>
                  </div>
                  <div class="field-body">
                    <div class="field">
                      <div class="control">
                        <div class="g-recaptcha" data-sitekey="6LfMMSkUAAAAAAh_iPmJ2Lqp9ceUaK9EeBdC6Uth"></div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="field is-horizontal">
                  <div class="field-label">
                    <!-- Left empty for spacing -->
                  </div>
                  <div class="field-body">
                    <div class="field">
                      <div class="control">
                        <input type="hidden" name="path" value="/contact.html?submit=success">
                        <input type="submit" class="button is-info" value="Send Message">
                      </div>
                    </div>
                  </div>
                </div>
                </form>
            </div>
        </section>
{% endblock %}
